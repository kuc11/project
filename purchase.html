<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./static/css/pur.css">
    <!--부트스트랩-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <!-- jquery-->
    <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>

</head>
<body>
    <div id="wrap">
        <div id="header">
            <div id="join">카카오톡 1초 간편가입</div>
            <div id="nav">
                <div id="menu1">
                    <i class="bi bi-list"></i>
                
                    <div id="menu"> 
                        <div class='menu_list'>ALL</div>
                        <div class='menu_list'><a href="purchase.html">카테고리별</a></div>
                        <div class='menu_list2'>
                            <div class='menu_detail'>토너</div>
                            <div class='menu_detail'>세럼</div>
                            <div class='menu_detail'>스킨로션</div>
                        </div>
                        <div class='menu_list'><a href="FQA.html">FQA</a></div>
                        <div class='menu_list'><a href="notice.html">NOTICE</a></div>
                      </div>


                </div>
                <div id="menu2">DW_gromming</div>
                <div id="menu3">로그인 | 회원가입</div>
                <div id="menu4"><a href="cart.html">장바구니 <i class="bi bi-cart"></i> </a>| 최근항목목록</div>
            </div>
        </div>

        <div id="content">
            <div id="subject">ALL</div>
            <div id="sort">
                <button class='subsort' id="sortLow">높은 가격순 정렬</button>
                <button class='subsort' id="sortPrice">낮은 가격순 정렬</button>
                <button class='subsort' id="filterPrice">2만원 이하 보기</button>
                <button class='subsort' id="revert">원래대로</button>
            </div>
            <div id="items">
               <!-- 자바스크립트 함수로 구현 -->
            </div>
            <div id="foot">
                <div id="footer">
                    <div id="footer1">
                        <div id="footer1_content">
                        상호 : 주식회사 DW미디어       대표자 : ㅇㅇㅇ<br>
                        주소 : (34838) 대전광역시 중구 중앙로 121번길 20<br>
                        (선화동 41) 2층<br>
                        대표전화 : 042-222-2402<br>       
                        대중교통 : 1호선 중앙로역<br>
                                        버스노선 / 1, 201, 202, 2002, 101, 311<br>
                                        ,313, 317, 511, 514, 603, 604, 606, 614<br>
                                        ,615, 620, 701, 802<br>
                        </div>
                    </div>
                    <div id="footer1">
                        <div id="footer1_content">
                            CS  CENTER<br>
                            010-1111-2222<br>
                            <br>
                            cs운영시간 10:00~ 17:30(주말, 공휴일 휴무)<br>
                            점심시간 12:30~13:30
                            </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

<script>
var products = [
    { id : 0, price:23800, title:'딥멜라케어 앰플' },
    { id : 1, price:23900, title:'스팟 트리트먼트 오인트겔' },
    { id : 2, price:16500, title:'아쿠아 라이스 약산성 클렌징폼' },
    { id : 3, price:12900, title:'세라마이드 더마 속보습 스킨' },
    { id : 4, price:15900, title:'세라마이드샷 앰플' },
    { id : 5, price:17800, title:'솔리드인 세라마이드 크림' },
    { id : 6, price:13900, title:'저분자 하일루론산 세럼' },
    { id : 7, price:14000, title:'하일루론산 토너' },
    { id : 8, price:10500, title:'초저분자 히알루론산 클렌징' }
]
layout(products);


$('#sortLow').click(function(){
    let productsPrice = products.slice();
    productsPrice.sort(function(item1, item2){
        return item2.price - item1.price;
    });

    $('#items').html('');
    layout(productsPrice);
    $('.write').css('background','#909090');
})

$('#sortPrice').click(function(){
    let productsPrice = products.slice();
    productsPrice.sort(function(item1, item2){
        return item1.price - item2.price;
    });

    $('#items').html('');
    layout(productsPrice);
    $('.write').css('background','#909090');
})

    $('#revert').click( function(){
    $('#items').html('');
    layout(products);
})

$('#filterPrice').click(function(){
    let proudctsFilter = products.filter(function(item){
        return item.price <=20000;
    });
    $('#items').html('');
    layout(proudctsFilter);
    $('.write').css('background','#909090');
})

function layout(products){
    products.forEach(product => {
        let template = `
        <div class='card'>
            <img src="./static/images/${product.title}.jpg" alt="${product.title}">
            <div class="card-body">
                <div class="write"><b>${product.title}<br>가격: ${product.price}</b></div>
            </div>
            <input type="checkbox" id="product${product.id}"> <label for="product${product.id}">${product.id}-${product.price}-${product.title}</label>
            <button onclick="addToCart()"><i class="bi bi-cart"></i></button>
        </div>
        `
        $('#items').append(template);
    });
}
var cartItems = [];
var total = 0;

function addToCart(productName, price){
    
    var checkboxes = document.querySelectorAll('input[type="checkbox"]:checked');


    // var newItem = { name: productName, price: price};
    // cartItems.push(newItem);
    checkboxes.forEach(function (checkbox) {
        var productLabel = checkbox.nextElementSibling.textContent;
        var productPrice = parseFloat(productLabel.split('-')[1].trim());
        
        // Add product to cart
        cartItems.push({ name: productLabel.split('-')[0].trim(),title: productLabel.split('-')[2].trim() ,price: productPrice });

        // Update total price
        total += productPrice;
    });    

    //window.location.href = "cart.html?data=" + encodeURIComponent(cartItems);
    
    // Convert object to JSON string and store it in local storage
     localStorage.setItem('myObject', JSON.stringify(cartItems));

    // Redirect to the second HTML page
    window.location.href = "cart.html";
}

</script>


</body>
</html>